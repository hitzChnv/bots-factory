<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:ext="http://www.liquibase.org/xml/ns/dbchangelog-ext"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog-ext
   http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-ext.xsd http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <changeSet id="20211213-01-create-schema-bots-factory" author="hitz" context="production">
        <sql>
            CREATE SCHEMA IF NOT EXISTS bots_factory;
        </sql>
    </changeSet>

    <changeSet id="20211213-02-create-table-reply-buttons" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="reply_buttons" remarks="Buttons for keyboards">
            <column name="id" type="bigint" autoIncrement="true" remarks="Identifier">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="text" type="varchar" remarks="Button description">
                <constraints nullable="false"/>
            </column>
            <column name="request_contact" type="boolean" remarks="Request contact flag"/>
            <column name="request_location" type="boolean" remarks="Request location flag"/>
        </createTable>
    </changeSet>

    <changeSet id="20211213-03-insert-into-table-reply-buttons" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="reply_buttons">
            <column name="id" type="bigint" value="1"/>
            <column name="text" type="varchar" value="Контакты 📱"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_buttons">
            <column name="id" type="bigint" value="2"/>
            <column name="text" type="varchar" value="Часто задаваемые вопросы 📎"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_buttons">
            <column name="id" type="bigint" value="3"/>
            <column name="text" type="varchar" value="Музыка 🎧"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_buttons">
            <column name="id" type="bigint" value="4"/>
            <column name="text" type="varchar" value="Видео 📹"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_buttons">
            <column name="id" type="bigint" value="5"/>
            <column name="text" type="varchar" value="Показать еще раз"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_buttons">
            <column name="id" type="bigint" value="6"/>
            <column name="text" type="varchar" value="Меню"/>
        </insert>
    </changeSet>

    <changeSet id="20211213-04-create-table-reply-keyboard-rows" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="reply_keyboard_rows" remarks="Keyboard rows of buttons">
            <column name="id" type="bigint" autoIncrement="true" remarks="Identifier">
                <constraints primaryKey="true" nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20211213-05-insert-into-table-reply-keyboard-rows" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="1"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="2"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="3"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="4"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="5"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="6"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="7"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_rows">
            <column name="id" type="bigint" value="8"/>
        </insert>
    </changeSet>

    <changeSet id="20211213-06-create-table-reply-row-button-union" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="reply_row_button_union" remarks="Relation between rows and buttons">
            <column name="reply_row_id" type="bigint" remarks="Row identifier"/>
            <column name="reply_button_id" type="bigint" remarks="Button identifier"/>
        </createTable>
    </changeSet>

    <changeSet id="20211213-07-insert-into-table-reply-row-button-union" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="1"/>
            <column name="reply_button_id" type="bigint" value="1"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="2"/>
            <column name="reply_button_id" type="bigint" value="2"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="3"/>
            <column name="reply_button_id" type="bigint" value="3"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="4"/>
            <column name="reply_button_id" type="bigint" value="4"/>
        </insert>

        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="5"/>
            <column name="reply_button_id" type="bigint" value="5"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="6"/>
            <column name="reply_button_id" type="bigint" value="6"/>
        </insert>

        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="7"/>
            <column name="reply_button_id" type="bigint" value="5"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_row_button_union">
            <column name="reply_row_id" type="bigint" value="8"/>
            <column name="reply_button_id" type="bigint" value="6"/>
        </insert>
    </changeSet>

    <changeSet id="20211213-08-create-table-reply-keyboards" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="reply_keyboards" remarks="Keyboard rows of buttons">
            <column name="id" type="bigint" autoIncrement="true" remarks="Identifier">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="reply_type" type="varchar" remarks="Type of keyboard"/>
        </createTable>
    </changeSet>

    <changeSet id="20211213-09-insert-into-table-reply-keyboards" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="reply_keyboards">
            <column name="id" type="bigint" value="1"/>
            <column name="reply_type" type="varchar" value="DEFAULT_REPLY_KEYBOARD"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboards">
            <column name="id" type="bigint" value="2"/>
            <column name="reply_type" type="varchar" value="QUESTIONS_REPLY_KEYBOARD"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboards">
            <column name="id" type="bigint" value="3"/>
            <column name="reply_type" type="varchar" value="CONTACTS_REPLY_KEYBOARD"/>
        </insert>
    </changeSet>

    <changeSet id="20211213-10-create-table-reply-keyboard-row-union" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="reply_keyboard_row_union" remarks="Relation between rows and keyboards">
            <column name="reply_keyboard_id" type="bigint" remarks="Keyboard id"/>
            <column name="reply_row_id" type="bigint" remarks="Row id"/>
        </createTable>
    </changeSet>

    <changeSet id="20211213-11-insert-into-table-reply-keyboard-row-union" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="1"/>
            <column name="reply_row_id" type="bigint" value="1"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="1"/>
            <column name="reply_row_id" type="bigint" value="2"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="1"/>
            <column name="reply_row_id" type="bigint" value="3"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="1"/>
            <column name="reply_row_id" type="bigint" value="4"/>
        </insert>

        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="2"/>
            <column name="reply_row_id" type="bigint" value="5"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="2"/>
            <column name="reply_row_id" type="bigint" value="6"/>
        </insert>

        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="3"/>
            <column name="reply_row_id" type="bigint" value="7"/>
        </insert>
        <insert schemaName="bots_factory" tableName="reply_keyboard_row_union">
            <column name="reply_keyboard_id" type="bigint" value="3"/>
            <column name="reply_row_id" type="bigint" value="8"/>
        </insert>
    </changeSet>

    <changeSet id="20211213-12-create-tables-fks" author="hitz" context="production">
        <addForeignKeyConstraint baseTableName="reply_row_button_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="reply_row_id"
                                 constraintName="reply-row-button-union-row-id-fk"
                                 referencedTableName="reply_keyboard_rows"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>

        <addForeignKeyConstraint baseTableName="reply_row_button_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="reply_button_id"
                                 constraintName="reply-row-button-union-button-id-fk"
                                 referencedTableName="reply_buttons"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>

        <addForeignKeyConstraint baseTableName="reply_keyboard_row_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="reply_keyboard_id"
                                 constraintName="reply-keyboard-row-union-keyboard-id-fk"
                                 referencedTableName="reply_keyboards"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>

        <addForeignKeyConstraint baseTableName="reply_keyboard_row_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="reply_row_id"
                                 constraintName="reply-keyboard-row-union-row-id-fk"
                                 referencedTableName="reply_keyboard_rows"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>
    </changeSet>

    <changeSet id="20211214-01-create-table-inline-buttons" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="inline_buttons" remarks="Buttons for keyboards">
            <column name="id" type="bigint" autoIncrement="true" remarks="Identifier">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="text" type="varchar" remarks="Button description">
                <constraints nullable="false"/>
            </column>
            <column name="url" type="varchar" remarks="" defaultValue=""/>
            <column name="callback_data" type="varchar" remarks="" defaultValue=""/>
            <column name="pay" type="boolean" remarks="" defaultValue="false"/>
        </createTable>
    </changeSet>

    <changeSet id="20211214-02-insert-into-table-inline-buttons" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="inline_buttons">
            <column name="id" type="bigint" value="1"/>
            <column name="text" type="varchar" value="Показать музыку"/>
            <column name="url" type="varchar" value="https://music.yandex.ru/home"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_buttons">
            <column name="id" type="bigint" value="2"/>
            <column name="text" type="varchar" value="Показать видео"/>
            <column name="url" type="varchar" value="https://www.youtube.com/"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_buttons">
            <column name="id" type="bigint" value="3"/>
            <column name="text" type="varchar" value="Меню"/>
        </insert>
    </changeSet>

    <changeSet id="20211214-03-create-table-inline-keyboard-rows" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="inline_keyboard_rows" remarks="Keyboard rows of buttons">
            <column name="id" type="bigint" autoIncrement="true" remarks="Identifier">
                <constraints primaryKey="true" nullable="false"/>
            </column>
        </createTable>
    </changeSet>

    <changeSet id="20211214-04-insert-into-table-inline-keyboard-rows" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="inline_keyboard_rows">
            <column name="id" type="bigint" value="1"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_keyboard_rows">
            <column name="id" type="bigint" value="2"/>
        </insert>
    </changeSet>

    <changeSet id="20211214-05-create-table-inline-row-button-union" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="inline_row_button_union" remarks="Relation between rows and buttons">
            <column name="inline_row_id" type="bigint" remarks="Row identifier"/>
            <column name="inline_button_id" type="bigint" remarks="Button identifier"/>
        </createTable>
    </changeSet>

    <changeSet id="20211214-06-insert-into-table-inline-row-button-union" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="inline_row_button_union">
            <column name="inline_row_id" type="bigint" value="1"/>
            <column name="inline_button_id" type="bigint" value="1"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_row_button_union">
            <column name="inline_row_id" type="bigint" value="1"/>
            <column name="inline_button_id" type="bigint" value="3"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_row_button_union">
            <column name="inline_row_id" type="bigint" value="2"/>
            <column name="inline_button_id" type="bigint" value="2"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_row_button_union">
            <column name="inline_row_id" type="bigint" value="2"/>
            <column name="inline_button_id" type="bigint" value="3"/>
        </insert>
    </changeSet>

    <changeSet id="20211214-07-create-table-inline-keyboards" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="inline_keyboards" remarks="Keyboard rows of buttons">
            <column name="id" type="bigint" autoIncrement="true" remarks="Identifier">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="inline_type" type="varchar" remarks="Type of keyboard"/>
        </createTable>
    </changeSet>

    <changeSet id="20211214-06-insert-into-table-inline-keyboards" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="inline_keyboards">
            <column name="id" type="bigint" value="1"/>
            <column name="inline_type" type="varchar" value="MUSIC_INLINE_KEYBOARD"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_keyboards">
            <column name="id" type="bigint" value="2"/>
            <column name="inline_type" type="varchar" value="VIDEO_INLINE_KEYBOARD"/>
        </insert>
    </changeSet>

    <changeSet id="20211214-07-create-table-inline-keyboard-row-union" author="hitz" context="production">
        <createTable schemaName="bots_factory" tableName="inline_keyboard_row_union" remarks="Relation between rows and keyboards">
            <column name="inline_keyboard_id" type="bigint" remarks="Keyboard id"/>
            <column name="inline_row_id" type="bigint" remarks="Row id"/>
        </createTable>
    </changeSet>

    <changeSet id="20211214-08-insert-into-table-inline-keyboard-row" author="hitz" context="production">
        <insert schemaName="bots_factory" tableName="inline_keyboard_row_union">
            <column name="inline_keyboard_id" type="bigint" value="1"/>
            <column name="inline_row_id" type="bigint" value="1"/>
        </insert>
        <insert schemaName="bots_factory" tableName="inline_keyboard_row_union">
            <column name="inline_keyboard_id" type="bigint" value="2"/>
            <column name="inline_row_id" type="bigint" value="2"/>
        </insert>
    </changeSet>

    <changeSet id="20211214-08-add-tables-fks" author="">

        <addForeignKeyConstraint baseTableName="inline_row_button_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="inline_row_id"
                                 constraintName="inline-row-button-union-row-id-fk"
                                 referencedTableName="inline_keyboard_rows"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>

        <addForeignKeyConstraint baseTableName="inline_row_button_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="inline_button_id"
                                 constraintName="inline-row-button-union-button-id-fk"
                                 referencedTableName="inline_buttons"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>

        <addForeignKeyConstraint baseTableName="inline_keyboard_row_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="inline_keyboard_id"
                                 constraintName="inline-keyboard-row-union-keyboard-id-fk"
                                 referencedTableName="inline_keyboards"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>

        <addForeignKeyConstraint baseTableName="inline_keyboard_row_union"
                                 baseTableSchemaName="bots_factory"
                                 baseColumnNames="inline_row_id"
                                 constraintName="inline-keyboard-row-union-row-id-fk"
                                 referencedTableName="inline_keyboard_rows"
                                 referencedTableSchemaName="bots_factory"
                                 referencedColumnNames="id"
                                 onDelete="CASCADE"/>
    </changeSet>

</databaseChangeLog>